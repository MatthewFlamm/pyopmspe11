<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Examples &mdash; pyopmspe11  documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=19f00094" />

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js?v=5d32c60e"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="_static/documentation_options.js?v=5929fcd5"></script>
        <script src="_static/doctools.js?v=888ff710"></script>
        <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="author" title="About these documents" href="about.html" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="pyopmspe11 Python API" href="api.html" />
    <link rel="prev" title="Configuration file" href="configuration_file.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #aaaaaa" >

          
          
          <a href="index.html">
            
              <img src="_static/logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="configuration_file.html">Configuration file</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Examples</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#hello-world">Hello world</a></li>
<li class="toctree-l2"><a class="reference internal" href="#presentation">Presentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#spe11a-in-a-1-mm-cartesian-grid">SPE11A in a 1 mm Cartesian grid</a></li>
<li class="toctree-l2"><a class="reference internal" href="#spe11b-in-a-1-m-cartesian-grid">SPE11B in a 1 m Cartesian grid</a></li>
<li class="toctree-l2"><a class="reference internal" href="#spe11c-in-a-corner-point-grid">SPE11C in a corner-point grid</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="api.html">pyopmspe11 Python API</a></li>
<li class="toctree-l1"><a class="reference internal" href="output_folder.html">Output folder</a></li>
<li class="toctree-l1"><a class="reference internal" href="related.html">Related</a></li>
<li class="toctree-l1"><a class="reference internal" href="about.html">About pyopmspe11</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #aaaaaa" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">pyopmspe11</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Examples</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/examples.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="examples">
<h1>Examples<a class="headerlink" href="#examples" title="Link to this heading"></a></h1>
<section id="hello-world">
<h2>Hello world<a class="headerlink" href="#hello-world" title="Link to this heading"></a></h2>
<p>The <a class="reference external" href="https://github.com/OPM/pyopmspe11/blob/main/examples/hello_world">examples/hello_world</a> folder contains configuration files
with low grid resolution and shorter injetion times (for initial testing of the framework). For example, by executing:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pyopmspe11<span class="w"> </span>-i<span class="w"> </span>spe11b.txt<span class="w"> </span>-o<span class="w"> </span>spe11b<span class="w"> </span>-m<span class="w"> </span>all<span class="w"> </span>-g<span class="w"> </span>all<span class="w"> </span>-t<span class="w"> </span><span class="m">5</span><span class="w"> </span>-r<span class="w"> </span><span class="m">50</span>,1,15<span class="w"> </span>-w<span class="w"> </span><span class="m">1</span>
</pre></div>
</div>
<p>The following is one of the figures generated related to the CO2 mass in the domain over time (i.e., the simulations results from
the corner-point grid mapped to the equidistance reporting grid of 50 x 15 as defined by the -r flag):</p>
<figure class="align-default">
<img alt="_images/spe11b_tco2_2Dmaps.png" src="_images/spe11b_tco2_2Dmaps.png" />
</figure>
<p>Let us now change the grid type from corner-point to tensor in line 7 of the configuration file.
Then, we run the simulations and we save the results in a different output folder:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pyopmspe11<span class="w"> </span>-i<span class="w"> </span>spe11b.txt<span class="w"> </span>-o<span class="w"> </span>tensor<span class="w"> </span>-m<span class="w"> </span>deck_flow_data<span class="w"> </span>-g<span class="w"> </span>performance_sparse<span class="w"> </span>-t<span class="w"> </span><span class="m">5</span><span class="w"> </span>-r<span class="w"> </span><span class="m">50</span>,1,15<span class="w"> </span>-w<span class="w"> </span><span class="m">1</span>
</pre></div>
</div>
<p>Here we have just set the framework to generate the deck, run the simulations, and generate the performance and sparse data.
Then, to visualize the comparison between both runs, this can be achived by executing:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pyopmspe11<span class="w"> </span>-c<span class="w"> </span>spe11b
</pre></div>
</div>
<p>The following are some of the figures generated in the compare folder:</p>
<figure class="align-default">
<img alt="_images/spe11b_performance.png" src="_images/spe11b_performance.png" />
</figure>
<figure class="align-default">
<img alt="_images/spe11b_sparse_data.png" src="_images/spe11b_sparse_data.png" />
</figure>
<p>This example uses a very coarser grid to run fast. See the following section for finer grids.</p>
</section>
<section id="presentation">
<h2>Presentation<a class="headerlink" href="#presentation" title="Link to this heading"></a></h2>
<p>Using the same grid size for the reporting of the results in the SPE11 description, the following computational times
were reported for the 2023 SPE Reservoir Simulation Conference (see the presentation <a class="reference external" href="https://github.com/Simulation-Benchmarks/11thSPE-CSP/blob/main/description/SPE11%20CSP.pdf">here</a>,
where you can also see some of the preliminary simulation results using OPM Flow):</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">Case      Dimensions [m]      Max. grid size [m]   No. grid cells  Total no. cells  No. active cells   Solver time step [d]¨  Total simulation time [s]</span>
<span class="l l-Scalar l-Scalar-Plain">spe11a^   [2.8,  0.01,  1.2]  [0.01, 0.01, 0.01]    [280, 1, 120]            33600             31034                   1e-5                    2118.30</span>
<span class="l l-Scalar l-Scalar-Plain">spe11b^*  [8400,    1, 1200]  [10,      1,   10]    [842, 1, 120]           101040             93318                     50                    1420.15</span>
<span class="l l-Scalar l-Scalar-Plain">spe11c^*  [8400, 5000, 1350]  [50,     50,   10]  [170, 100, 120]          2040000           1885200                     50                   25450.68</span>


<span class="l l-Scalar l-Scalar-Plain">^ All three cases were run with 70 MPI processes and 2 threads per MPI process. i.e., 140 cpu cores.</span>
<span class="l l-Scalar l-Scalar-Plain">* spe11b and spe11c have an extra layer [1 m] of grid cells on the left and right boundaries to include the buffer volume</span>
<span class="l l-Scalar l-Scalar-Plain">¨ The solver time step is the maximum value allowed by the simulator</span>
</pre></div>
</div>
<p>The <a class="reference external" href="https://github.com/OPM/pyopmspe11/blob/main/examples/finner_grids">examples/finner_grids</a> folder contains configuration files
with grid size of the same order and finner as requested for reporting the spatial data in the benchmark, as well as the required injection schedules.</p>
</section>
<section id="spe11a-in-a-1-mm-cartesian-grid">
<h2>SPE11A in a 1 mm Cartesian grid<a class="headerlink" href="#spe11a-in-a-1-mm-cartesian-grid" title="Link to this heading"></a></h2>
<p>In a 1 mm Cartesian grid for the spe11a <a class="reference external" href="https://github.com/OPM/pyopmspe11/blob/main/examples/finner_grids/spe11a1mm.txt">(spe11a1mm.txt)</a>, by executing:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pyopmspe11<span class="w"> </span>-i<span class="w"> </span>spe11a1mm.txt<span class="w"> </span>-o<span class="w"> </span>spe11a1mm<span class="w"> </span>-m<span class="w"> </span>all<span class="w"> </span>-g<span class="w"> </span>all<span class="w"> </span>-t<span class="w"> </span><span class="m">1</span><span class="w"> </span>-r<span class="w"> </span><span class="m">280</span>,1,120<span class="w"> </span>-w<span class="w"> </span><span class="m">0</span>.16666666666666666
</pre></div>
</div>
<p>the following are some of the generated figures:</p>
<figure class="align-default" id="id1">
<img alt="_images/spe11a_sparse_data.png" src="_images/spe11a_sparse_data.png" />
<figcaption>
<p><span class="caption-text">Sparse data.</span><a class="headerlink" href="#id1" title="Link to this image"></a></p>
</figcaption>
</figure>
<figure class="align-default" id="id2">
<img alt="_images/spe11a_performance.png" src="_images/spe11a_performance.png" />
<figcaption>
<p><span class="caption-text">Performance data.</span><a class="headerlink" href="#id2" title="Link to this image"></a></p>
</figcaption>
</figure>
<figure class="align-default" id="id3">
<img alt="_images/spe11a_performance_detailed.png" src="_images/spe11a_performance_detailed.png" />
<figcaption>
<p><span class="caption-text">Detailed performance data.</span><a class="headerlink" href="#id3" title="Link to this image"></a></p>
</figcaption>
</figure>
<figure class="align-default" id="id4">
<img alt="_images/spe11a_tco2_2Dmaps.png" src="_images/spe11a_tco2_2Dmaps.png" />
<figcaption>
<p><span class="caption-text">Dense data for the CO2 mass (in the 1 cm size, tho the simulations are runned at 1 mm size).</span><a class="headerlink" href="#id4" title="Link to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="spe11b-in-a-1-m-cartesian-grid">
<h2>SPE11B in a 1 m Cartesian grid<a class="headerlink" href="#spe11b-in-a-1-m-cartesian-grid" title="Link to this heading"></a></h2>
<p>The following are simulation results in a 1 m Cartesian grid <a class="reference external" href="https://github.com/OPM/pyopmspe11/blob/main/examples/finner_grids/spe11b1m.txt">(spe11b1m.txt)</a>,
and the animation in the <a class="reference external" href="https://github.com/OPM/pyopmspe11/blob/main">main page</a> was generated using these results (the inizialization time of 1000 years was
skipped and the results were printed ever 25 years instead of 5 years):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pyopmspe11<span class="w"> </span>-i<span class="w"> </span>spe11b1m.txt<span class="w"> </span>-o<span class="w"> </span>spe11b1m<span class="w"> </span>-m<span class="w"> </span>all<span class="w"> </span>-g<span class="w"> </span>all<span class="w"> </span>-r<span class="w"> </span><span class="m">840</span>,1,120<span class="w"> </span>-t<span class="w"> </span><span class="m">25</span><span class="w"> </span>-w<span class="w"> </span><span class="m">0</span>.1
</pre></div>
</div>
<figure class="align-default" id="id5">
<img alt="_images/spe11b_sparse_data_1m.png" src="_images/spe11b_sparse_data_1m.png" />
<figcaption>
<p><span class="caption-text">Sparse data in the 1 m Cartesian grid.</span><a class="headerlink" href="#id5" title="Link to this image"></a></p>
</figcaption>
</figure>
<figure class="align-default" id="id6">
<img alt="_images/spe11b_performance_1m.png" src="_images/spe11b_performance_1m.png" />
<figcaption>
<p><span class="caption-text">Performance data in the 1 m Cartesian grid.</span><a class="headerlink" href="#id6" title="Link to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="spe11c-in-a-corner-point-grid">
<h2>SPE11C in a corner-point grid<a class="headerlink" href="#spe11c-in-a-corner-point-grid" title="Link to this heading"></a></h2>
<p>The following are simulation results in a corner-point grid <a class="reference external" href="https://github.com/OPM/pyopmspe11/blob/main/examples/finner_grids/spe11c_cp.txt">(spe11c_cp.txt)</a> with 21729920 active cells (the inizialization time of 1000 years was skipped):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pyopmspe11<span class="w"> </span>-i<span class="w"> </span>spe11c_cp.txt<span class="w"> </span>-o<span class="w"> </span>spe11c_cp<span class="w"> </span>-m<span class="w"> </span>all<span class="w"> </span>-g<span class="w"> </span>all<span class="w"> </span>-r<span class="w"> </span><span class="m">168</span>,100,120<span class="w"> </span>-t<span class="w"> </span><span class="m">0</span>,5,10,15,20,25,30,35,40,45,50,75,100,150,200,250,300,350,400,450,500,600,700,800,900,1000
</pre></div>
</div>
<figure class="align-default" id="id7">
<img alt="_images/spe11c_sparse_data.png" src="_images/spe11c_sparse_data.png" />
<figcaption>
<p><span class="caption-text">Sparse data in the corner-point grid.</span><a class="headerlink" href="#id7" title="Link to this image"></a></p>
</figcaption>
</figure>
<figure class="align-default" id="id8">
<img alt="_images/spe11c_performance.png" src="_images/spe11c_performance.png" />
<figcaption>
<p><span class="caption-text">Performance data in the corner-point grid.</span><a class="headerlink" href="#id8" title="Link to this image"></a></p>
</figcaption>
</figure>
<img alt="_images/spe11c.gif" src="_images/spe11c.gif" />
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="configuration_file.html" class="btn btn-neutral float-left" title="Configuration file" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="api.html" class="btn btn-neutral float-right" title="pyopmspe11 Python API" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, NORCE Norwegian Research Centre AS.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>